(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d661ece"],{"2de1":function(e,t,r){},"369c":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"UserFollowers"}},[e.isLoading?s("Spinner"):[s("UserSidebar"),s("div",{staticClass:"UserFollowersPanel"},[s("div",{staticClass:"title"},[s("div",{staticClass:"pre-page"},[s("button",{staticClass:"btn",on:{click:function(t){return e.$router.back()}}},[s("img",{attrs:{src:r("8586"),alt:""}})])]),s("div",{staticClass:"title-info"},[s("div",{staticClass:"name"},[e._v(e._s(e.user.name))]),s("div",{staticClass:"tweet-count"},[e._v(e._s(e.user.tweetCount)+"推文")])])]),s("div",{staticClass:"admin-users-card"},[s("UserFollowNavtabs",{attrs:{userData:e.user}}),s("UserFollowersList",{attrs:{followers:e.followers}})],1)]),s("RecommendedFollowers")]],2)},n=[],a=r("1da1"),o=(r("96cf"),r("a004")),i=r("cfa6"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},e._l(e.followers,(function(t){return r("div",{key:t.followerId,staticClass:"follower-container"},[r("div",{staticClass:"avatar"},[r("img",{attrs:{src:e._f("emptyImageFilter")(t.avatar),alt:""}})]),r("div",{staticClass:"follower-info"},[r("div",{staticClass:"isfollowed-info"},[r("div",{staticClass:"follower-title"},[r("router-link",{attrs:{to:{name:"user-profile",params:{id:t.followerId}}}},[r("div",{staticClass:"name"},[e._v(e._s(t.name))])]),r("div",{staticClass:"account"},[e._v("@"+e._s(t.account))])],1),r("div",{staticClass:"toggleFollow"},[t.isFollowing?r("button",{staticClass:"btn isFollowing",attrs:{disabled:e.isProcessing},on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.deleteFollowing(t)}}},[e._v(" 正在跟隨 ")]):r("button",{staticClass:"btn",attrs:{disabled:e.isProcessing},on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.addFollowing(t)}}},[e._v(" 跟隨 ")])])]),r("p",[e._v(e._s(t.introduction))])])])})),0)},l=[],u=r("5530"),f=(r("d81d"),r("4cce")),d=r("2708"),w=r("2fa3"),v=r("2f62"),p={name:"UserFollowersList",mixins:[d["a"]],props:{Followers:{type:Array,required:!0}},data:function(){return{followers:[],isProcessing:!1}},computed:Object(u["a"])({},Object(v["b"])(["currentUser"])),watch:{Followers:function(e){this.fetchfollowers(e)}},created:function(){this.fetchfollowers()},methods:{fetchfollowers:function(){this.followers=this.Followers},addFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,s={id:e.followerId},r.next=5,f["a"].followUser(s);case 5:if(n=r.sent,a=n.data,"success"===a.status){r.next=9;break}throw new Error(a.message);case 9:t.renderAfterFollowToggle(e),o=t.$route.params.id,t.$socket.emit("follow",{userId:o,currentUserId:t.currentUser.id}),w["a"].fire({icon:"success",title:"追蹤成功！"}),t.isProcessing=!1,r.next=21;break;case 16:r.prev=16,r.t0=r["catch"](0),t.isProcessing=!1,console.log(r.t0),w["a"].fire({icon:"error",title:"無法執行動作，請稍後再試！"});case 21:case"end":return r.stop()}}),r,null,[[0,16]])})))()},deleteFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,f["a"].unfollowUser(e.followerId);case 4:if(s=r.sent,n=s.data,"success"===n.status){r.next=8;break}throw new Error(n.message);case 8:t.renderAfterFollowToggle(e),w["a"].fire({icon:"success",title:"取消追蹤成功！"}),t.isProcessing=!1,r.next=18;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isProcessing=!1,console.log(r.t0),w["a"].fire({icon:"error",title:"無法追蹤，請稍後再試！"});case 18:case"end":return r.stop()}}),r,null,[[0,13]])})))()},renderAfterFollowToggle:function(e){this.followers=this.followers.map((function(t){return t.followerId===e.followerId?Object(u["a"])(Object(u["a"])({},t),{},{isFollowing:!e.isFollowing}):t}))}}},g=p,m=(r("6b04"),r("2877")),h=Object(m["a"])(g,c,l,!1,null,"2504dfe8",null),b=h.exports,F=r("8f83"),k=r("2375"),C={name:"UserFollowers",components:{UserSidebar:o["a"],UserFollowNavtabs:i["a"],UserFollowersList:b,RecommendedFollowers:F["a"],Spinner:k["a"]},beforeRouteEnter:function(e,t,r){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{r((function(t){var r=e.params.id;t.fetchUser(r),t.fetchFollowers(r),t.fetchingData=!0}))}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})))()},beforeRouteUpdate:function(e,t,r){var s=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s.fetchingData&&r(),n=e.params.id,t.next=5,s.fetchUser(n);case 5:s.fetchFollowers(n),r(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},data:function(){return{followers:[],user:{},isLoading:!0,fetchingData:!1}},created:function(){var e=this.$route.params.id;this.fetchFollowers(e),this.fetchUser(e)},methods:{fetchUser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].getUser(e);case 3:s=r.sent,n=s.data,t.user=n,t.isLoading=!1,r.next=14;break;case 9:r.prev=9,r.t0=r["catch"](0),t.isLoading=!1,console.log(r.t0),w["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試！"});case 14:case"end":return r.stop()}}),r,null,[[0,9]])})))()},fetchFollowers:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].getUserFollowers(e);case 3:s=r.sent,n=s.data,t.followers=n,t.isLoading=!1,r.next=14;break;case 9:r.prev=9,r.t0=r["catch"](0),t.isLoading=!1,console.log(r.t0),w["a"].fire({icon:"error",title:"無法取得跟隨者資料，請稍後再試！"});case 14:case"end":return r.stop()}}),r,null,[[0,9]])})))()}}},x=C,U=(r("7fc7"),Object(m["a"])(x,s,n,!1,null,"672fc990",null));t["default"]=U.exports},"6b04":function(e,t,r){"use strict";r("9835")},"7c0c":function(e,t,r){},"7fc7":function(e,t,r){"use strict";r("2de1")},8586:function(e,t,r){e.exports=r.p+"img/lastPage.7110cc7e.svg"},9835:function(e,t,r){},a0f5:function(e,t,r){"use strict";r("7c0c")},cfa6:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"nav nav-tabs"},[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile-followers",params:{id:e.userData.id}}}},[e._v(" 跟隨者 ")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile-following",params:{id:e.userData.id}}}},[e._v(" 正在跟隨 ")])],1)])},n=[],a={name:"UserFollowNavtabs",props:{userData:{type:Object,required:!0}}},o=a,i=(r("a0f5"),r("2877")),c=Object(i["a"])(o,s,n,!1,null,"62f71dd8",null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-5d661ece.87d7f69b.js.map