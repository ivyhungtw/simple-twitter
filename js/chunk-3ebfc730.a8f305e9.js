(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ebfc730"],{"236c":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"userProfileReply"}},[n("UserSidebar"),n("div",{staticClass:"mainSection"},[n("div",{staticClass:"title"},[n("button",{staticClass:"btn",on:{click:function(t){return e.$router.back()}}},[n("img",{attrs:{src:r("8586"),alt:""}})]),n("div",{staticClass:"nameTag"},[n("p",[e._v(e._s(e.user.name))]),n("p",[e._v(e._s(e.user.tweetCount)+" 則推文")])])]),n("div",{staticClass:"admin-users-card"},[n("UserProfileCard",{attrs:{userData:e.user}}),n("UserProfileNavtabs",{attrs:{userData:e.user}}),n("UserProfileReplyList",{attrs:{userData:e.user}})],1)]),n("RecommendedFollowers")],1)},a=[],s=r("5530"),c=r("1da1"),i=(r("d81d"),r("96cf"),r("a004")),o=r("7950"),u=r("92e8"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("ul",{staticClass:"tweetList"},[e.isLoading?[r("p",{staticClass:"loading"},[e._v("資料讀取中...")])]:[e.tweets.length?e._e():r("p",{staticClass:"noData"},[e._v("無資料")]),e._l(e.tweets,(function(t){return r("TweetItem",{key:t.replyId,attrs:{userData:e.user,tweet:t}})}))]],2)])},f=[],d=(r("a4d3"),r("e01a"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("b3b3")),p=r("2f62"),h=r("2fa3"),m=r("6783"),w=r("4cce"),v={name:"UserProfileReplyList",components:{TweetItem:d["a"]},props:{userData:{type:Object,required:!0}},data:function(){return{user:{},tweets:[],isLoading:!0}},methods:{fetchUser:function(e){this.user=e},fetchALlRepliedTweets:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,m["a"].getAllRepliedTweets(e);case 4:n=r.sent,a=n.data,t.tweets=a.map((function(e){var t=e.id,r=e.TweetId,n=e.Tweet,a=n.createdAt,s=n.description,c=n.isLiked,i=n.likeCount,o=n.replyCount,u=e.Tweet.User,l=u.avatar,f=u.name,d=u.account,p=u.id;return{replyId:t,UserId:p,createdAt:a,description:s,id:r,isLiked:c,likeCount:i,replyCount:o,user:{avatar:l,name:f,account:d}}})),r.next=14;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log("in fetchUser"),console.log(r.t0),h["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試！"});case 14:case"end":return r.stop()}}),r,null,[[0,9]])})))()},fetchAllReplyUsers:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,Promise.all(e.tweets.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w["a"].getUser(t.UserId);case 3:return r=e.sent,n=r.data,a=n.avatar,c=n.name,i=n.account,e.abrupt("return",Object(s["a"])(Object(s["a"])({},t),{},{user:{avatar:a,name:c,account:i}}));case 9:e.prev=9,e.t0=e["catch"](0),console.log("in fetchAllReplyUsers"),console.log(e.t0),h["a"].fire({icon:"error",title:"無法取得完整回覆資料，請稍後再試！"});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));case 3:e.tweets=t.sent,e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()}},computed:Object(s["a"])({},Object(p["b"])(["currentUser"])),watch:{userData:{handler:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.fetchUser(t),r=this.user.id,e.next=5,this.fetchALlRepliedTweets(r);case 5:return e.next=7,this.fetchAllReplyUsers();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0),h["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試！"});case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}(),deep:!0}}},b=v,g=(r("4685"),r("2877")),R=Object(g["a"])(b,l,f,!1,null,"2c2129ed",null),U=R.exports,k=r("8f83"),x={name:"UserProfile",components:{UserSidebar:i["a"],UserProfileCard:o["a"],UserProfileNavtabs:u["a"],UserProfileReplyList:U,RecommendedFollowers:k["a"]},beforeRouteEnter:function(e,t,r){return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{r((function(t){var r=e.params.id;t.fetchUser(r),t.fetchingData=!0}))}catch(n){console.log(n)}case 1:case"end":return t.stop()}}),t)})))()},beforeRouteUpdate:function(e,t,r){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n.fetchingData&&r(),a=e.params.id,t.next=5,n.fetchUser(a);case 5:r(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},data:function(){return{user:{},tweets:[],fetchingData:!1}},methods:{fetchUser:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w["a"].getUser(e);case 3:n=r.sent,a=n.data,t.user=a,r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log(r.t0),h["a"].fire({icon:"error",title:"無法取得使用者資訊，請稍後再試！"});case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},afterToggleLike:function(e){this.tweets=this.tweets.map((function(t){return t.id===e.id?Object(s["a"])(Object(s["a"])({},t),{},{isLiked:e.isLiked}):t}))},afterCreateReply:function(e){this.tweets=this.tweets.map((function(t){return t.id===e?Object(s["a"])(Object(s["a"])({},t),{},{replyCount:t.replyCount+1}):t}))}}},y=x,C=(r("fa8d"),Object(g["a"])(y,n,a,!1,null,"cab5156e",null));t["default"]=C.exports},4685:function(e,t,r){"use strict";r("d298")},"739f":function(e,t,r){},d298:function(e,t,r){},fa8d:function(e,t,r){"use strict";r("739f")}}]);
//# sourceMappingURL=chunk-3ebfc730.a8f305e9.js.map