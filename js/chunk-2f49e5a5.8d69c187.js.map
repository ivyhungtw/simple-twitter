{"version":3,"sources":["webpack:///./src/views/Notification.vue?673f","webpack:///src/views/Notification.vue","webpack:///./src/views/Notification.vue?0299","webpack:///./src/views/Notification.vue?2ef8","webpack:///./src/views/Notification.vue?54b2","webpack:///./src/apis/socket.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_l","item","type","key","id","attrs","avatar","_v","_s","name","tweet","_e","reply","staticRenderFns","components","data","messageList","computed","sockets","connection","console","log","notification","$socket","emit","unshift","length","account","UserId","tweetId","replyId","methods","component","getPublicRoom","apiHelper","get","createPrivateRoom","userId","post","getPrivateRoom","getNotification","getRoom","roomId","getRoomsByUser","getAvailableUsers","getUnread"],"mappings":"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","file":"js/chunk-2f49e5a5.8d69c187.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"notification\"},[_c('UserSidebar'),_c('div',{staticClass:\"mainSection\"},[_vm._m(0),_c('div',{staticClass:\"noti-panel\"},[_vm._l((_vm.messageList),function(item){return [(item.type === 1)?_c('li',{key:item.id,staticClass:\"tweetItem\"},[_c('div',{staticClass:\"tweet-noti\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('h6',[_vm._v(_vm._s(item.name)+\" 有新的推文通知\")]),_c('p',[_vm._v(\" \"+_vm._s(item.tweet)+\" \")])])]):_vm._e(),(item.type === 2)?_c('li',{key:item.id,staticClass:\"followItem\"},[_c('div',{staticClass:\"follow-noti\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('h6',[_vm._v(_vm._s(item.name)+\" 開始追蹤你\")])])]):_vm._e(),(item.type === 3)?_c('li',{key:item.id,staticClass:\"replyItem\"},[_c('div',{staticClass:\"reply-noti\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('h6',[_vm._v(\"你的貼文有新的回覆\")]),_c('p',[_vm._v(\" \"+_vm._s(item.reply)+\" \")])])]):_vm._e(),(item.type === 4)?_c('li',{key:item.id,staticClass:\"likeItem\"},[_c('div',{staticClass:\"like-noti\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('h6',[_vm._v(_vm._s(item.name)+\" 喜歡你的貼文\")])])]):_vm._e()]})],2)]),_c('RecommededFollowers')],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('h1',[_vm._v(\"通知\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"notification\">\r\n    <!-- UserSidebar -->\r\n    <UserSidebar></UserSidebar>\r\n    <div class=\"mainSection\">\r\n      <div class=\"title\">\r\n        <h1>通知</h1>\r\n      </div>\r\n      <div class=\"noti-panel\">\r\n        <template v-for=\"item of messageList\">\r\n          <!-- tweetItem -->\r\n          <li v-if=\"item.type === 1\" class=\"tweetItem\" :key=\"item.id\">\r\n            <div class=\"tweet-noti\">\r\n              <div class=\"avatar\">\r\n                <img :src=\"item.avatar\" alt=\"\" />\r\n              </div>\r\n              <h6>{{ item.name }} 有新的推文通知</h6>\r\n              <p>\r\n                {{ item.tweet }}\r\n              </p>\r\n            </div>\r\n          </li>\r\n\r\n          <!-- followItem -->\r\n\r\n          <li v-if=\"item.type === 2\" class=\"followItem\" :key=\"item.id\">\r\n            <div class=\"follow-noti\">\r\n              <div class=\"avatar\">\r\n                <img :src=\"item.avatar\" alt=\"\" />\r\n              </div>\r\n              <h6>{{ item.name }} 開始追蹤你</h6>\r\n            </div>\r\n          </li>\r\n\r\n          <!-- replyItem -->\r\n\r\n          <li v-if=\"item.type === 3\" class=\"replyItem\" :key=\"item.id\">\r\n            <div class=\"reply-noti\">\r\n              <div class=\"avatar\">\r\n                <img :src=\"item.avatar\" alt=\"\" />\r\n              </div>\r\n              <h6>你的貼文有新的回覆</h6>\r\n              <p>\r\n                {{ item.reply }}\r\n              </p>\r\n            </div>\r\n          </li>\r\n\r\n          <!-- likeItem -->\r\n\r\n          <li v-if=\"item.type === 4\" class=\"likeItem\" :key=\"item.id\">\r\n            <div class=\"like-noti\">\r\n              <div class=\"avatar\">\r\n                <img :src=\"item.avatar\" alt=\"\" />\r\n              </div>\r\n              <h6>{{ item.name }} 喜歡你的貼文</h6>\r\n            </div>\r\n          </li>\r\n        </template>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- RecommededFollowers -->\r\n    <RecommededFollowers></RecommededFollowers>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UserSidebar from \"../components/UserSidebar\";\r\nimport RecommededFollowers from \"../components/RecommendedFollowers\";\r\nimport { mapState } from \"vuex\";\r\nimport { Toast } from \"../utils/helpers\";\r\nimport socketsAPI from \"../apis/socket\";\r\n\r\nexport default {\r\n  name: \"notification\",\r\n  components: { UserSidebar, RecommededFollowers },\r\n  data() {\r\n    return {\r\n      messageList: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"currentUser\"]),\r\n  },\r\n  sockets: {\r\n    connection: function (data) {\r\n      console.log(\"Data:\" + data);\r\n    },\r\n    notification: function (data) {\r\n      console.log(\"notification\", data);\r\n\r\n      if (data) {\r\n        console.log(\"data\");\r\n        this.$socket.emit(\r\n          \"tweet\",\r\n          {\r\n            id: data.id,\r\n            account: data.account,\r\n            name: data.name,\r\n            UserId: data.id,\r\n            avatar: data.avatar,\r\n            tweetId: data.tweetId,\r\n            tweet: data.tweet,\r\n            replyId: data.replyId,\r\n            reply: data.reply,\r\n            type: data.type\r\n          },\r\n          this.currentUser.id\r\n        );\r\n        this.messageList.unshift({\r\n          type: data.type, \r\n          id: this.messageList.length + 1,\r\n          account: data.account,\r\n          name: data.name,\r\n          UserId: data.id,\r\n          avatar: data.avatar,\r\n          tweetId: data.tweetId,\r\n          tweet: data.tweet,\r\n          replyId: data.replyId,\r\n          reply: data.reply,\r\n        });\r\n      }\r\n    },\r\n  },\r\n  async created() {\r\n    try {\r\n      const { data } = await socketsAPI.getNotification();\r\n      console.log(\"apidata\", data);\r\n      this.messageList = data;\r\n    } catch (error) {\r\n      console.log(error);\r\n      Toast.fire({\r\n        icon: \"error\",\r\n        title: \"無法取得通知資料，請稍後再試！\",\r\n      });\r\n    }\r\n  },\r\n\r\n  methods: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.notification {\r\n  display: flex;\r\n}\r\n\r\n.mainSection {\r\n  flex: 1;\r\n  width: 100%;\r\n  min-width: 600px;\r\n  height: 100vh;\r\n  border-right: 1px solid #e6ecf0;\r\n  overflow-y: scroll;\r\n}\r\n\r\n/* scrollbar */\r\n/* for Chrome, Safari and Opera */\r\n.mainSection {\r\n  -ms-overflow-style: scrollbar;\r\n  /* IE and Edge */\r\n  /* scrollbar-width: 8px; */\r\n  /* Firefox */\r\n}\r\n\r\n.mainSection::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.mainSection::-webkit-scrollbar-thumb {\r\n  background-color: #9197a3;\r\n  border-radius: 15px;\r\n}\r\n\r\n.mainSection::-webkit-scrollbar-track {\r\n  background-color: #ddd;\r\n}\r\n/* scrollbar */\r\n\r\n.title {\r\n  height: 55px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  align-items: center;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #fff;\r\n}\r\n\r\n.title h1 {\r\n  font-weight: 700;\r\n  font-size: 19px;\r\n  margin: 0;\r\n}\r\n\r\n.avatar {\r\n  width: 25px;\r\n  height: 25px;\r\n}\r\n.avatar img {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n  background-size: cover;\r\n  object-fit: cover;\r\n}\r\n\r\n.tweet-noti,\r\n.reply-noti,\r\n.follow-noti,\r\n.like-noti {\r\n  padding: 10px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n}\r\n\r\nh6 {\r\n  margin-top: 10px;\r\n  font-weight: 900;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Notification.vue?vue&type=template&id=9a664054&scoped=true&\"\nimport script from \"./Notification.vue?vue&type=script&lang=js&\"\nexport * from \"./Notification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Notification.vue?vue&type=style&index=0&id=9a664054&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9a664054\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notification.vue?vue&type=style&index=0&id=9a664054&scoped=true&lang=css&\"","import { apiHelper } from './../utils/helpers'\r\n\r\nexport default {\r\n  getPublicRoom() {\r\n    // getPublicRoom\r\n    return apiHelper.get('/rooms/4')\r\n  },\r\n  createPrivateRoom(userId) {\r\n    return apiHelper.post('/rooms', { userId })\r\n  },\r\n  // 未完成\r\n  getPrivateRoom(userId) {\r\n    return apiHelper.get(`/rooms/${userId}`)\r\n  },\r\n  getNotification() {\r\n    return apiHelper.get('/rooms/notifications')\r\n  },\r\n  getRoom(roomId) {\r\n    return apiHelper.get(`/rooms/${roomId}`)\r\n  },\r\n  getRoomsByUser() {\r\n    // get all chats by rooms\r\n    return apiHelper.get('/rooms')\r\n  },\r\n  getAvailableUsers() {\r\n    return apiHelper.get('rooms/availableUsers')\r\n  },\r\n  getUnread() {\r\n    return apiHelper.get('/private/unread')\r\n  }\r\n}"],"sourceRoot":""}