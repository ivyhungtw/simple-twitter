(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d7fa398"],{"0599":function(e,t,n){},"11e8":function(e,t,n){"use strict";n("0599")},6229:function(e,t,n){},"7c0c":function(e,t,n){},8262:function(e,t,n){"use strict";n("6229")},8586:function(e,t,n){e.exports=n.p+"img/lastPage.7110cc7e.svg"},a0f5:function(e,t,n){"use strict";n("7c0c")},cc95:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"UserFollowers"}},[e.isLoading?s("Spinner"):[s("UserSidebar"),s("div",{staticClass:"UserFollowersPanel"},[s("div",{staticClass:"title"},[s("div",{staticClass:"pre-page"},[s("button",{staticClass:"btn",on:{click:function(t){return e.$router.back()}}},[s("img",{attrs:{src:n("8586"),alt:""}})])]),s("div",{staticClass:"title-info"},[s("div",{staticClass:"name"},[e._v(e._s(e.user.name))]),s("div",{staticClass:"tweet-count"},[e._v(e._s(e.user.tweetCount)+"推文")])])]),s("div",{staticClass:"admin-users-card"},[s("UserFollowNavtabs",{attrs:{userData:e.user}}),s("UserFollowingsList",{attrs:{followings:e.followings}})],1)]),s("RecommendedFollowers")]],2)},r=[],a=n("1da1"),o=(n("96cf"),n("a004")),i=n("cfa6"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},e._l(e.followings,(function(t){return n("div",{key:t.followingId,staticClass:"following-container"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:e._f("emptyImageFilter")(t.avatar),alt:""}})]),n("div",{staticClass:"follower-info"},[n("div",{staticClass:"isfollowed-info"},[n("div",{staticClass:"follower-title"},[n("router-link",{attrs:{to:{name:"user-profile",params:{id:t.followingId}}}},[n("div",{staticClass:"name"},[e._v(e._s(t.name))])]),n("div",{staticClass:"account"},[e._v("@"+e._s(t.account))])],1),n("div",{staticClass:"toggleFollow"},[t.isFollowing?n("button",{staticClass:"btn isFollowing",attrs:{disabled:e.isProcessing},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.deleteFollowing(t)}}},[e._v(" 正在跟隨 ")]):n("button",{staticClass:"btn",attrs:{disabled:e.isProcessing},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.addFollowing(t)}}},[e._v(" 跟隨 ")])])]),n("p",[e._v(e._s(t.introduction))])])])})),0)},c=[],u=n("5530"),f=(n("d81d"),n("4cce")),g=n("2708"),d=n("2fa3"),w=n("2f62"),v={name:"UserFollowersList",mixins:[g["a"]],props:{Followings:{type:Array,required:!0}},data:function(){return{followings:[],isProcessing:!1}},computed:Object(u["a"])({},Object(w["b"])(["currentUser"])),watch:{Followings:function(e){this.fetchFollowings(e)}},methods:{fetchFollowings:function(){this.followings=this.Followings},addFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var s,r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isProcessing=!0,s={id:e.followingId},n.next=5,f["a"].followUser(s);case 5:if(r=n.sent,a=r.data,"success"===a.status){n.next=9;break}throw new Error(a.message);case 9:t.renderAfterFollowToggle(e),o=t.$route.params.id,t.$socket.emit("follow",{userId:o,currentUserId:t.currentUser.id}),d["a"].fire({icon:"success",title:"追蹤成功！"}),t.isProcessing=!1,n.next=21;break;case 16:n.prev=16,n.t0=n["catch"](0),t.isProcessing=!1,console.log(n.t0),d["a"].fire({icon:"error",title:"無法執行動作，請稍後再試！"});case 21:case"end":return n.stop()}}),n,null,[[0,16]])})))()},deleteFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isProcessing=!0,n.next=4,f["a"].unfollowUser(e.followingId);case 4:if(s=n.sent,r=s.data,"success"===r.status){n.next=8;break}throw new Error(r.message);case 8:t.renderAfterFollowToggle(e),d["a"].fire({icon:"success",title:"取消追蹤成功！"}),t.isProcessing=!1,n.next=18;break;case 13:n.prev=13,n.t0=n["catch"](0),t.isProcessing=!1,console.log(n.t0),d["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試！"});case 18:case"end":return n.stop()}}),n,null,[[0,13]])})))()},renderAfterFollowToggle:function(e){this.followings=this.followings.map((function(t){return t.followingId===e.followingId?Object(u["a"])(Object(u["a"])({},t),{},{isFollowing:!e.isFollowing}):t}))}}},p=v,m=(n("8262"),n("2877")),h=Object(m["a"])(p,l,c,!1,null,"55938436",null),b=h.exports,F=n("8f83"),k=n("2375"),C={name:"UserFollowing",components:{UserSidebar:o["a"],UserFollowNavtabs:i["a"],UserFollowingsList:b,RecommendedFollowers:F["a"],Spinner:k["a"]},beforeRouteEnter:function(e,t,n){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{n((function(t){var n=e.params.id;t.fetchUser(n),t.fetchFollowings(n),t.fetchingData=!0}))}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})))()},beforeRouteUpdate:function(e,t,n){var s=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s.fetchingData&&n(),r=e.params.id,t.next=5,s.fetchUser(r);case 5:s.fetchFollowings(r),n(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},data:function(){return{followings:[],user:{},isLoading:!0,fetchingData:!1}},created:function(){var e=this.$route.params.id;this.fetchFollowings(e)},methods:{fetchUser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f["a"].getUser(e);case 3:s=n.sent,r=s.data,t.user=r,t.isLoading=!1,n.next=14;break;case 9:n.prev=9,n.t0=n["catch"](0),t.isLoading=!1,console.log(n.t0),d["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試！"});case 14:case"end":return n.stop()}}),n,null,[[0,9]])})))()},fetchFollowings:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f["a"].getUserFollowings(e);case 3:s=n.sent,r=s.data,t.followings=r,console.log("userfollowing:",r),t.isLoading=!1,n.next=15;break;case 10:n.prev=10,n.t0=n["catch"](0),t.isLoading=!1,console.log(n.t0),d["a"].fire({icon:"error",title:"無法取得正在跟隨資料，請稍後再試！"});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})))()}}},x=C,U=(n("11e8"),Object(m["a"])(x,s,r,!1,null,"3718e6fc",null));t["default"]=U.exports},cfa6:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"nav nav-tabs"},[n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile-followers",params:{id:e.userData.id}}}},[e._v(" 跟隨者 ")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile-following",params:{id:e.userData.id}}}},[e._v(" 正在跟隨 ")])],1)])},r=[],a={name:"UserFollowNavtabs",props:{userData:{type:Object,required:!0}}},o=a,i=(n("a0f5"),n("2877")),l=Object(i["a"])(o,s,r,!1,null,"62f71dd8",null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-6d7fa398.5e1a71e0.js.map